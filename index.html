<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Histology - Veterinary Colon</title>
  <style>
    body {
      margin: 0;
      font-family: "Poppins", sans-serif;
      background: radial-gradient(circle at center, #0a0a0a, #000);
      color: white;
      overflow: hidden;
    }

    canvas#bgCanvas {
      position: fixed;
      top: 0;
      left: 0;
      z-index: -2;
      width: 100%;
      height: 100%;
    }

    #viewer {
      width: 65vw;
      height: 90vh;
      margin: 5vh auto;
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 0 40px rgba(180, 100, 255, 0.3);
      background: rgba(255, 255, 255, 0.05);
    }

    #leftPanel, #rightPanel, #infoPanel {
      position: fixed;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(255, 255, 255, 0.07);
      border: 1px solid rgba(255, 255, 255, 0.15);
      border-radius: 15px;
      padding: 15px;
      backdrop-filter: blur(15px);
      box-shadow: 0 0 15px rgba(190, 120, 255, 0.2);
      transition: all 0.3s;
      max-height: 85vh;
      overflow-y: auto;
    }

    #leftPanel { left: 20px; width: 280px; }
    #rightPanel { right: 20px; width: 280px; }
    #infoPanel { right: 320px; width: 300px; display: none; }

    #leftPanel h3, #rightPanel h3, #infoPanel h3 {
      color: #d5aaff;
      text-align: center;
      margin-top: 0;
    }

    .part-btn {
      display: block;
      width: 100%;
      text-align: center;
      margin: 6px 0;
      padding: 8px;
      background: rgba(255, 255, 255, 0.12);
      border: 1px solid rgba(255, 255, 255, 0.25);
      border-radius: 10px;
      color: #fff;
      cursor: pointer;
      font-size: 15px;
      transition: all 0.3s ease;
    }

    .part-btn:hover {
      background: rgba(200, 150, 255, 0.3);
      transform: scale(1.05);
      color: #ffe6ff;
    }

    #bottomBar {
      position: fixed;
      bottom: 15px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 25px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 30px;
      padding: 10px 25px;
      box-shadow: 0 0 15px rgba(180, 100, 255, 0.3);
      backdrop-filter: blur(10px);
      z-index: 10;
    }

    .icon-btn {
      background: none;
      border: none;
      color: #fff;
      font-size: 24px;
      cursor: pointer;
      transition: transform 0.3s, color 0.3s;
    }

    .icon-btn:hover {
      transform: scale(1.2);
      color: #dcaeff;
    }

    #infoPanel p, #infoPanel h4 {
      line-height: 1.7;
      font-size: 15px;
      color: #eee;
      margin: 8px 0;
      display: block;
      text-align: right;
    }

    #infoPanel img {
      width: 100%;
      border-radius: 10px;
      margin-top: 10px;
      margin-bottom: 15px;
      display: block;
    }

    #infoText div {
      display: block;
      margin-bottom: 18px;
      border-bottom: 1px solid rgba(255,255,255,0.15);
      padding-bottom: 10px;
    }

    hr {
      border: none;
      border-top: 1px solid rgba(255,255,255,0.2);
      margin: 15px 0;
    }

    #leftPanel p {
      white-space: pre-wrap;
      line-height: 1.7;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <canvas id="bgCanvas"></canvas>

  <div id="leftPanel">
    <h3>ğŸ”¬Tissue explanation</h3>
    <p>
      <span class="highlight">Urinary Bladder</span>

      The urinary bladder is a distensible reservoir for urine, located in the pelvis, posterior to the pubic symphysis; its size and shape change as it fills. It contains three openings, two for the ureters (ureteric orifices) and one for the urethra (internal urethral orifice). The triangular region defined by these three openings, the trigone, is relatively smooth and constant in thickness, whereas the rest of the bladder wall is thick and folded when the bladder is empty and thin and smooth when the bladder is distended. These differences reflect the embryologic origins of the trigone and the rest of the bladder wall: The trigone is derived from the embryonic mesonephric ducts, and the major portion of the wall originates from the cloaca.

      <span class="highlight-section">Smooth Muscle & Nervous System</span>
      The smooth muscle of the bladder wall forms the detrusor muscle. Toward the opening of the urethra, the muscle fibers form the involuntary internal urethral sphincter, a ring-like arrangement of muscle around the opening of the urethra. The smooth muscle bundles of the detrusor muscle are less regularly arranged than that of the tubular portions of the excretory passages, and thus the muscle and collagen bundles are randomly mixed. Contraction of the detrusor muscle of the bladder compresses the entire organ and forces the urine into the urethra.

      The bladder is innervated by both sympathetic and parasympathetic divisions of the autonomic nervous system:
      â€¢ Sympathetic fibers form a plexus in the adventitia of the bladder wall. These fibers probably innervate blood vessels in the wall.
      â€¢ Parasympathetic fibers originate from S2 to S4 segments of the spinal cord and travel with pelvic splanchnic nerves into the bladder. They end in terminal ganglia in the muscle bundles and the adventitia and are the efferent fibers of the micturition reflex.
      â€¢ Sensory fibers from the bladder to the sacral portion of the spinal cord are the afferent fibers of the micturition reflex.

      <span class="highlight-cyan">*Source: Histology: A Text and Atlas, with Correlated Cell and Molecular Biology, 7th Edition*</span> 
      <hr>

      <span class="highlight-section">Epithelium & Lamina Propria</span>
      The bladder is lined internally by transitional epithelium. Depending on the degree of filling, the number of cell layers visible in the epithelium ranges from 2â€“3 in the distended bladder to 10â€“14 in the contracted state. Specialisations of the epithelium serve to protect the underlying tissues against the hypertonic urine. The outer layer of the trilaminar plasmalemma (unit membrane) is thickened. The cellular barrier is reinforced by bundles of subplasmalemmal filaments and membrane vesicles (crusta).

      The lamina propria consists of a connective tissue lattice containing delicate elastic fibres. Together with the submucosa, the lamina propria forms a mobile, displaceable layer that facilitates the alternate folding and stretching of the bladder wall. The lamina propria and submucosa are typically separated by a lamina muscularis mucosae. Bundles of elastic fibres provide mechanical reinforcement at the neck of the bladder. Lymphoid follicles may be present in the lamina propria.

      <span class="highlight-cyan">Source: Veterinary Histology of Domestic Mammals and Birds, 5th Edition (Textbook and Color Atlas)*</span> 
      <hr>

      <span class="highlight-yellow">Under the light microscope</span>, the urothelium, lamina propria, muscularis propria, and serosa may be seen in a histological section of the bladder wall. The urothelium's most superficial layer comprises dome-shaped umbrella cells whose shape becomes flat in a distended bladder. The cells of this layer are often multinucleated. Below the umbrella cells, the urothelium contains the multi-cell-layered intermediate and a single-cell layer of basal cells contacting its basement membrane.

      <span class="highlight-section">Pathophysiology</span>
      Urge incontinence, a form of urinary incontinence, is characterized by urinary urgency. Etiologies for urge incontinence include neurogenic, myogenic, or idiopathic causes. Disruption or damage of autonomic nerves or nerve signaling to the bladder cells may result in conditions including overactive bladder or bladder pain syndrome.

      <span class="highlight-section">Clinical Significance</span>
      Clinicians use cystoscopy to examine the urinary bladder mucosa for pathologic lesions, which may be diagnosed via biopsy sampling. Benign lesions include von Brunnâ€™s nests. These islands or nests of the urothelium are separated from the luminal surface and consequently found within the lamina propria. Von Brunnâ€™s nests of benign urothelium may undergo degeneration to form cysts (cystitis cystica).

      After prostate cancer, the second most common type of malignancy in the genitourinary tract is bladder cancer. Urothelial carcinomas are the most frequently diagnosed type of bladder cancer and are graded based on their depth of invasion into the bladder wall. Clinically 75%-85% of urothelial carcinomas are superficial, and 15%-25% of the cases are invasive and metastatic at the time of initial diagnosis. Depending on the risk classification, non-muscle invasive neoplasms are treated with endoscopic reactions. However, more aggressive treatment options, including radical cystectomy, are preferred for patients with muscle-invasive histology.

      <span class="highlight-cyan">Source: National Center for Biotechnology Information (NCBI) Bookshelf*</span>
      <hr> 

      The urinary bladder is lined by urothelium, a specialised epithelium with number of cell layers depending upon whether the bladder is stretched or unstretched. There are elastic fibres in the lamina propria. Small bundles of smooth muscle form a discontinuous lamina muscularis except in the cat. The muscularis (detrusor muscle) is the same as in the ureter, and the outer layer may similarly be adventitia or serosa. Parasympathetic ganglia and nerve receptors are present.

      <span class="highlight-cyan">*Source: Aughey and Fryeâ€™s Comparative Veterinary Histology with Clinical Correlates, 2nd Edition* </span> 
    </p>
  </div>
  </div>

  <div id="rightPanel">
    <h3> Parts of tissue</h3>
    <div id="partsList">loading..</div>
  </div>

  <div id="infoPanel">
    <h3 id="infoTitle"> Part details</h3>
    <div id="infoText">Select a part from the View Details list..</div>
  </div>

  <div id="viewer"></div>

  <div id="bottomBar">
    <button class="icon-btn" onclick="resetCamera()">ğŸ”„</button>
    
    <button class="icon-btn" onclick="goToMicroscop()">ğŸ”¬</button>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/three@0.146.0/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.146.0/examples/js/loaders/GLTFLoader.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.146.0/examples/js/controls/OrbitControls.js"></script>

  <script>
    let scene, camera, renderer, controls, model;
    const viewer = document.getElementById("viewer");
    const partsList = document.getElementById("partsList");
    const infoPanel = document.getElementById("infoPanel");
    const infoTitle = document.getElementById("infoTitle");
    const infoText = document.getElementById("infoText");
    let currentOpen = null;

    const partData = {
      "Basal_lamina": { details: [{ title: "Description ", text: `Thin layer of proteins under epithelial cells.

Supports cells and helps filter substances between cells and connective tissue`, img: "images/crypt_of_lieberkuhn.jpg" }] },
       "Relaxed_transitional_epithelium": { details: [{ title: "Description ", text: `    Special epithelium in bladder and urinary tract, stretches when filled.

Cells appear rounded or cuboidal when empty, flatten when stretched   .`, img: "images/crypt_of_lieberkuhn.jpg" }] },
      "Columnar_cell": { details: [{ title: " Description", text: `Tall, vertical-shaped cells, found in intestines and stomach.

Main function: absorption and secretion, sometimes have microvilli to increase surface area`, img: "images/enterocyte.jpg" }] },
      "Cuboidal_cell": { details: [{ title: " Description", text: `Cube-shaped cells, found in glands or kidney tubules.

Function: secretion or absorption depending on location.`, img: "images/inflammatory_cell.jpg" }] },
      "Umbralla_cell": { details: [{ title: " Description", text: `Top layer of transitional epithelium in the bladder.

Protects underlying cells from urine, flat when bladder is full, acts like a protective â€œumbrella .`, img: "goblet_cell.jpg" }] }
      
    };

    init();
    loadModel();
    animateBackground();

    function init() {
      scene = new THREE.Scene();
      camera = new THREE.PerspectiveCamera(60, viewer.clientWidth / viewer.clientHeight, 0.1, 1000);
      camera.position.set(0, 1, 5);

      renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
      renderer.setSize(viewer.clientWidth, viewer.clientHeight);
      renderer.setPixelRatio(window.devicePixelRatio);
      viewer.appendChild(renderer.domElement);

      const ambient = new THREE.AmbientLight(0xffffff, 0.5);
      const dirLight = new THREE.DirectionalLight(0xffffff, 0.7);
      dirLight.position.set(4, 4, 6);
      scene.add(ambient, dirLight);

      controls = new THREE.OrbitControls(camera, renderer.domElement);
      controls.enableDamping = true;
      controls.autoRotate = true;
      controls.autoRotateSpeed = 0.3;

      window.addEventListener("resize", onWindowResize);

      document.addEventListener("click", (e) => {
        const panels = [infoPanel, document.getElementById("rightPanel"), document.getElementById("leftPanel")];
        if (!panels.some(p => p.contains(e.target))) {
          infoPanel.style.display = "none";
          currentOpen = null;
          clearHighlight();
        }
      });
    }

    function loadModel() {
      const loader = new THREE.GLTFLoader();
      loader.load(
        "Bladder.glb",
        (gltf) => {
          model = gltf.scene;
          scene.add(model);
          const box = new THREE.Box3().setFromObject(model);
          const center = box.getCenter(new THREE.Vector3());
          model.position.sub(center);
          model.scale.setScalar(1.1);
          model.traverse(c => {
            if(c.isMesh) c.material = c.material.clone();
          });
          generatePartsList(model);
          animate();
        },
        undefined,
        (err) => console.error("Ø®Ø·Ø£ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„:", err)
      );
    }

    function generatePartsList(model) {
      const meshes = [];
      model.traverse(c => c.isMesh && !c.name.toLowerCase().includes("object") && meshes.push(c));
      partsList.innerHTML = "";
      meshes.forEach(m => {
        const btn = document.createElement("button");
        btn.className = "part-btn";
        btn.textContent = m.name;
        btn.onclick = (ev) => {
          ev.stopPropagation();
          highlightPart(m);
          showPartInfo(m.name);
        };
        partsList.appendChild(btn);
      });
    }

    function clearHighlight() {
      if (!model) return;
      model.traverse(c => {
        if (c.isMesh && c.material?.emissive) {
          c.material.emissive.set(0x000000);
        }
      });
    }

    function highlightPart(mesh) {
      clearHighlight();
      if(mesh.material?.emissive) {
        mesh.material.emissive.set(0xff77ff);
      }
    }

    function showPartInfo(partName) {
      const data = partData[partName];
      if (currentOpen === partName) {
        infoPanel.style.display = "none";
        clearHighlight();
        currentOpen = null;
        return;
      }
      infoTitle.textContent = partName;
      infoText.innerHTML = "";

      if (data && data.details) {
        data.details.forEach((item) => {
          const section = document.createElement("div");
          section.innerHTML = `<h4>${item.title}</h4><p>${item.text.replace(/\n/g, "<br>")}</p>${item.img ? `<img src="${item.img}" alt="">` : ""}`;
          infoText.appendChild(section);
        });
      } else {
        infoText.innerHTML = `<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù‡Ø³ØªÙˆÙ„ÙˆØ¬ÙŠØ© Ù„Ù€ ${partName}</p>`;
      }

      infoPanel.style.display = "block";
      currentOpen = partName;
    }

    function resetCamera() { controls.reset(); }
    function highlightRandom() {
      const meshes = [];
      model.traverse(c => c.isMesh && meshes.push(c));
      const chosen = meshes[Math.floor(Math.random() * meshes.length)];
      highlightPart(chosen);
      showPartInfo(chosen.name);
    }
    function goToMicroscop() { window.open("https://histologyguide.com/slideview/MH-147-bladder/16-slide-1.html", "_blank"); }
    function onWindowResize() { camera.aspect = viewer.clientWidth / viewer.clientHeight; camera.updateProjectionMatrix(); renderer.setSize(viewer.clientWidth, viewer.clientHeight); }
    function animate() { requestAnimationFrame(animate); controls.update(); renderer.render(scene, camera); }

    function animateBackground() {
      const canvas = document.getElementById("bgCanvas");
      const ctx = canvas.getContext("2d");
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      const bubbles = Array.from({ length: 15 }, () => ({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height,
        r: 10 + Math.random() * 25,
        dx: (Math.random() - 0.5) * 0.3,
        dy: (Math.random() - 0.5) * 0.3,
        color: `rgba(180, 120, 255, 0.15)`
      }));

      function loop() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        for (let b of bubbles) {
          ctx.beginPath();
          ctx.arc(b.x, b.y, b.r, 0, Math.PI * 2);
          ctx.fillStyle = b.color;
          ctx.fill();
          b.x += b.dx;
          b.y += b.dy;
          if (b.x < 0 || b.x > canvas.width) b.dx *= -1;
          if (b.y < 0 || b.y > canvas.height) b.dy *= -1;
        }
        requestAnimationFrame(loop);
      }
      loop();
    }
  </script>
  
<style>
  .highlight{
    color: #ff77ff;
    font-size: 18px;
    font-weight: bold;
    background-color: rgba(255, 255, 255, 0.1);
    padding: 2px 4px;
    border-radius: 3px;
  }

  .highlight-yellow {
    color: #ffcc00;
    font-size: 20px;
    font-style: inherit;
   
  }

  .highlight-cyan {
    color: #7ef3ff;
    font-size: 16px;
    font-weight: 600;
    background-color: rgba(0,255,255,0.1);
    padding: 1px 3px;
    border-radius: 2px;
  }
    .highlight-section {
      color: #ffa07a;
      font-size: 17px;
      font-weight: bold;
      border-left: 3px solid #ff77ff;
      padding-left: 6px;
      margin-top: 10px;
      margin-bottom: 6px;
    }
</style>
<style>
  /* ---------- Scrollbar Ø¹ØµØ±ÙŠ Ù…Ø¹ glow Ùˆshadow ---------- */

#leftPanel::-webkit-scrollbar,
#rightPanel::-webkit-scrollbar,
#infoPanel::-webkit-scrollbar {
  width: 12px;
}

/* Ø®Ù„ÙÙŠØ© Ø§Ù„Ø´Ø±ÙŠØ· */
#leftPanel::-webkit-scrollbar-track,
#rightPanel::-webkit-scrollbar-track,
#infoPanel::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 6px;
}

/* Ø´ÙƒÙ„ Ø§Ù„Ù…Ø¤Ø´Ø± */
#leftPanel::-webkit-scrollbar-thumb,
#rightPanel::-webkit-scrollbar-thumb,
#infoPanel::-webkit-scrollbar-thumb {
  background: #ff77ff;
  border-radius: 6px;
  border: 2px solid rgba(255, 255, 255, 0.1);
  box-shadow: 0 0 8px rgba(255, 119, 255, 0.5);
  transition: all 0.3s ease;
}

/* Ø¹Ù†Ø¯ Ù…Ø±ÙˆØ± Ø§Ù„Ù…Ø§ÙˆØ³ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¤Ø´Ø± */
#leftPanel::-webkit-scrollbar-thumb:hover,
#rightPanel::-webkit-scrollbar-thumb:hover,
#infoPanel::-webkit-scrollbar-thumb:hover {
  background: #ff55ee;
  box-shadow: 0 0 12px rgba(255, 85, 238, 0.7);
}

</style>
<!-- ---------- Gallery Ø£Ø¹Ù„Ù‰ Ø§Ù„ØµÙØ­Ø© ---------- -->
 <!-- ---------- Gallery Ø£Ø¹Ù„Ù‰ Ø§Ù„ØµÙØ­Ø© ---------- -->
<div id="galleryTopContainer">
  <h2 class="gallery-title">ÙSlide</h2>
  <div id="galleryTop" class="gallery">
    <img src="1.jpg" alt="Image 1" class="gallery-img">
    <img src="2.jpg" alt="Image 2" class="gallery-img">
    <img src="3.jpg" alt="Image 3" class="gallery-img">
    <img src="4.jpg" alt="Image 4" class="gallery-img">
    <img src="5.jpg" alt="Image 5" class="gallery-img">
    <img src="6.jpg" alt="Image 6" class="gallery-img">
    <img src="7.jpg" alt="Image 7" class="gallery-img">
    <img src="8.jpg" alt="Image 8" class="gallery-img">
    <img src="9.jpg" alt="Image 9" class="gallery-img">
    <img src="10.jpg" alt="Image 10" class="gallery-img">
  </div>
</div>

<!-- ---------- Overlay Ù„Ù„Ø¹Ø±Ø¶ Ø§Ù„ÙƒØ¨ÙŠØ± ---------- -->
<div id="overlay" class="overlay">
  <button id="closeOverlay">âœ–</button>
  <img id="overlayImg" src="" alt="">
</div>

<style>
#galleryTopContainer {
  position: fixed;
  top: 10px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 100;
  text-align: center;
  width: 95%;
  max-width: 1200px;
}

.gallery-title {
  color: #ff77ff;
  font-size: 22px;
  font-weight: bold;
  margin-bottom: 10px;
  text-shadow: 0 0 5px rgba(255,119,255,0.6);
}

.gallery {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 12px;
  background: rgba(0,0,0,0.3);
  padding: 12px 15px;
  border-radius: 12px;
  backdrop-filter: blur(5px);
}

.gallery-img {
  width: 90px;
  height: 60px;
  object-fit: cover;
  border-radius: 8px;
  cursor: pointer;
  transition: transform 0.3s, box-shadow 0.3s;
}

.gallery-img:hover {
  transform: scale(1.3);
  box-shadow: 0 6px 20px rgba(255,119,255,0.6);
}

/* ---------- Overlay ---------- */
.overlay {
  position: fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background: rgba(0,0,0,0.85);
  display: flex;
  justify-content: center;
  align-items: center;
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.5s ease;
  z-index: 200;
}

.overlay.active {
  opacity: 1;
  visibility: visible;
}

.overlay img {
  max-width: 80%;
  max-height: 80%;
  border-radius: 12px;
  transform: scale(0.7);
  transition: transform 0.5s ease, box-shadow 0.5s ease;
  box-shadow: 0 0 0 rgba(0,0,0,0);
}

.overlay.active img {
  transform: scale(1);
  box-shadow: 0 10px 40px rgba(255,119,255,0.6);
}

#closeOverlay {
  position: absolute;
  top: 20px;
  right: 30px;
  background: rgba(255,255,255,0.2);
  border: none;
  color: white;
  font-size: 28px;
  cursor: pointer;
  padding: 5px 12px;
  border-radius: 8px;
  transition: background 0.3s, transform 0.3s;
}

#closeOverlay:hover {
  background: rgba(255,255,255,0.5);
  transform: scale(1.1);
}
</style>

<script>
const galleryImgs = document.querySelectorAll(".gallery-img");
const overlay = document.getElementById("overlay");
const overlayImg = document.getElementById("overlayImg");
const closeBtn = document.getElementById("closeOverlay");

galleryImgs.forEach(img => {
  img.addEventListener("click", () => {
    overlayImg.src = img.src;
    overlay.classList.add("active");
  });
});

closeBtn.addEventListener("click", () => {
  overlay.classList.remove("active");
});
</script>
<script>
  window.addEventListener("load", () => {
  const elements = [document.getElementById("viewer"), document.getElementById("leftPanel"), document.getElementById("rightPanel"), document.getElementById("bottomBar")];
  
  elements.forEach(el => {
    el.classList.add("intro-anim");
    // ØªØ­ÙÙŠØ² Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¨Ø¹Ø¯ ÙˆÙ‚Øª ØµØºÙŠØ± Ù„ØªØ³Ù„Ø³Ù„ Ø§Ù„Ø¹Ù†Ø§ØµØ±
    setTimeout(() => el.classList.add("active"), 100);
  });
});

</script>
<style>
  /* Fade + scale intro */
.intro-anim {
  opacity: 0;
  transform: scale(0.8);
  filter: drop-shadow(0 0 0px #ff77ff);
  transition: all 1.2s cubic-bezier(0.68, -0.55, 0.27, 1.55);
}
.intro-anim.active {
  opacity: 1;
  transform: scale(1);
  filter: drop-shadow(0 0 20px #ff77ff);
}

</style>
</body>
<!-- ---------- Buttons to toggle panels ---------- -->
<style>
.toggle-btn {
  position: fixed;
  top: 15px;
  width: 30px;
  height: 30px;
  background: rgba(255, 255, 255, 0.1);
  color: #fff;
  border: 1px solid rgba(255,255,255,0.2);
  border-radius: 50%;
  cursor: pointer;
  font-size: 18px;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 150;
  transition: all 0.3s ease;
}

.toggle-btn:hover {
  background: rgba(255, 119, 255, 0.3);
  transform: scale(1.2);
}

#toggleLeft { left: 10px; }
#toggleRight { right: 10px; }
#toggleInfo { right: 330px; }
</style>

<button id="toggleLeft" class="toggle-btn">â‡¦</button>
<button id="toggleRight" class="toggle-btn">â‡¨</button>
<button id="toggleInfo" class="toggle-btn">â„¹</button>

<script>
const leftPanel = document.getElementById("leftPanel");
const rightPanel = document.getElementById("rightPanel");
const infoPanelEl = document.getElementById("infoPanel");

document.getElementById("toggleLeft").addEventListener("click", () => {
  if(leftPanel.style.display === "none"){
    leftPanel.style.display = "block";
  } else {
    leftPanel.style.display = "none";
  }
});

document.getElementById("toggleRight").addEventListener("click", () => {
  if(rightPanel.style.display === "none"){
    rightPanel.style.display = "block";
  } else {
    rightPanel.style.display = "none";
  }
});

document.getElementById("toggleInfo").addEventListener("click", () => {
  if(infoPanelEl.style.display === "none" || infoPanelEl.style.display === ""){
    infoPanelEl.style.display = "block";
  } else {
    infoPanelEl.style.display = "none";
  }
});
</script>
<!-- ---------- Ø²Ø± Ù„Ù„ØªØ­ÙƒÙ… ÙÙŠ Gallery ---------- -->
<button id="toggleGallery" class="toggle-btn" style="top: 60px; left: 50%; transform: translateX(-50%);">ğŸ–¼ï¸</button>

<style>
/* ØªØ±Ø§Ù†Ø²ÙŠØ´Ù† Ø³Ù„Ø³ Ù„Ø¬Ù…ÙŠØ¹ Panels Ùˆ Gallery */
#leftPanel, #rightPanel, #infoPanel, #galleryTopContainer {
  transition: all 0.5s ease;
}

/* Ø¹Ù†Ø¯ Ø§Ù„Ø¥ØºÙ„Ø§Ù‚ Ù†Ø³ØªØ®Ø¯Ù… transform Ù„ØªØ£Ø«ÙŠØ± Ø§Ù„Ø§Ù†Ø²Ù„Ø§Ù‚ */
.hidden-panel {
  opacity: 0;
  pointer-events: none;
  transform: translateY(-20px);
}
</style>

<script>
// ØªØ¹Ø¯ÙŠÙ„ Ø£Ø²Ø±Ø§Ø± Ø§Ù„ÙØªØ­/Ø§Ù„Ø¥ØºÙ„Ø§Ù‚ Ù„ØªØ¹Ù…Ù„ Ù…Ø¹ Ø§Ù„ØªØ±Ù†Ø²Ø´Ù†
function togglePanel(panel) {
  if(panel.classList.contains("hidden-panel")) {
    panel.classList.remove("hidden-panel");
  } else {
    panel.classList.add("hidden-panel");
  }
}

document.getElementById("toggleLeft").addEventListener("click", () => togglePanel(leftPanel));
document.getElementById("toggleRight").addEventListener("click", () => togglePanel(rightPanel));
document.getElementById("toggleInfo").addEventListener("click", () => togglePanel(infoPanelEl));
document.getElementById("toggleGallery").addEventListener("click", () => togglePanel(document.getElementById("galleryTopContainer")));
</script>
<style>
/* ---------- Responsive Viewer Ù…Ø¹ Expand Ø¹Ù†Ø¯ Ø¥Ø®ÙØ§Ø¡ Panels ---------- */
@media (max-width: 768px) {
  #viewer {
    transition: all 0.5s ease;
  }
  #viewer.expanded {
    height: 70vh; /* ÙŠØ²ÙŠØ¯ Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ù€ Viewer Ø¹Ù†Ø¯ Ø¥Ø®ÙØ§Ø¡ Panels */
  }
}
</style>

<script>
// ØªØ§Ø¨Ø¹ Ù„ØªØ­Ø¯ÙŠØ« Ø­Ø¬Ù… Ø§Ù„Ù€ Viewer Ø­Ø³Ø¨ Ø­Ø§Ù„Ø© Panels Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„
function updateViewerSize() {
  if(window.innerWidth <= 768){
    const panels = [leftPanel, rightPanel, infoPanelEl];
    const allHidden = panels.every(p => !p.classList.contains("active-panel"));
    if(allHidden){
      document.getElementById("viewer").classList.add("expanded");
    } else {
      document.getElementById("viewer").classList.remove("expanded");
    }
  }
}

// ØªØ¹Ø¯ÙŠÙ„ Ø£Ø²Ø±Ø§Ø± Toggle Ù„ØªØ­Ø¯ÙŠØ« Ø­Ø¬Ù… Viewer Ø¹Ù†Ø¯ Ø§Ù„ÙØªØ­ ÙˆØ§Ù„ØºÙ„Ù‚
document.getElementById("toggleLeft").addEventListener("click", updateViewerSize);
document.getElementById("toggleRight").addEventListener("click", updateViewerSize);
document.getElementById("toggleInfo").addEventListener("click", updateViewerSize);
document.getElementById("toggleGallery").addEventListener("click", updateViewerSize);

// ØªØ­Ø¯ÙŠØ« ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø­Ø¬Ù… Ø§Ù„Ø´Ø§Ø´Ø©
window.addEventListener("resize", updateViewerSize);

// ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
window.addEventListener("load", updateViewerSize);
</script>
</html>
